import{c as I,P as L,a as D}from"../chunks/index.Dt_pjQkU.js";import{s as M,x as $,e as B,c as K,b as R,f as k,i as J,z,A as H,B as F,V as X}from"../chunks/scheduler.DJbgeZ86.js";import{S as G,i as W,t as V,b as Y}from"../chunks/index.NvtDNA1J.js";import{s as Z}from"../chunks/theme.BK28Fqn0.js";import{a as S}from"../chunks/auth.store.MJk1P8pJ.js";import{g as Q,i as q}from"../chunks/entry.SFY_cZ30.js";new TextEncoder;const ee=new TextDecoder,te=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let a=0;a<e.length;a++)r[a]=e.charCodeAt(a);return r},re=t=>{let e=t;e instanceof Uint8Array&&(e=ee.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return te(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},oe=re;var ae=Object.create,E=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyNames,ie=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty,ce=(t,e)=>function(){return e||(0,t[x(t)[0]])((e={exports:{}}).exports,e),e.exports},ue=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of x(e))!se.call(t,o)&&o!==r&&E(t,o,{get:()=>e[o],enumerable:!(a=ne(e,o))||a.enumerable});return t},A=(t,e,r)=>(r=t!=null?ae(ie(t)):{},ue(e||!t||!t.__esModule?E(r,"default",{value:t,enumerable:!0}):r,t)),N=ce({"../../node_modules/.pnpm/cookie@0.5.0/node_modules/cookie/index.js"(t){t.parse=a,t.serialize=o;var e=Object.prototype.toString,r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(i,d){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var g={},s=d||{},y=s.decode||n,f=0;f<i.length;){var u=i.indexOf("=",f);if(u===-1)break;var h=i.indexOf(";",f);if(h===-1)h=i.length;else if(h<u){f=i.lastIndexOf(";",u-1)+1;continue}var _=i.slice(f,u).trim();if(g[_]===void 0){var m=i.slice(u+1,h).trim();m.charCodeAt(0)===34&&(m=m.slice(1,-1)),g[_]=l(m,y)}f=h+1}return g}function o(i,d,g){var s=g||{},y=s.encode||c;if(typeof y!="function")throw new TypeError("option encode is invalid");if(!r.test(i))throw new TypeError("argument name is invalid");var f=y(d);if(f&&!r.test(f))throw new TypeError("argument val is invalid");var u=i+"="+f;if(s.maxAge!=null){var h=s.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(h)}if(s.domain){if(!r.test(s.domain))throw new TypeError("option domain is invalid");u+="; Domain="+s.domain}if(s.path){if(!r.test(s.path))throw new TypeError("option path is invalid");u+="; Path="+s.path}if(s.expires){var _=s.expires;if(!p(_)||isNaN(_.valueOf()))throw new TypeError("option expires is invalid");u+="; Expires="+_.toUTCString()}if(s.httpOnly&&(u+="; HttpOnly"),s.secure&&(u+="; Secure"),s.priority){var m=typeof s.priority=="string"?s.priority.toLowerCase():s.priority;switch(m){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(s.sameSite){var j=typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite;switch(j){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return u}function n(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function c(i){return encodeURIComponent(i)}function p(i){return e.call(i)==="[object Date]"||i instanceof Date}function l(i,d){try{return d(i)}catch{return i}}}}),b=A(N()),T=A(N());function C(t){if(!t)return null;try{const e=JSON.parse(t);if(!e)return null;if(e.constructor.name==="Object")return e;if(e.constructor.name!=="Array")throw new Error(`Unexpected format: ${e.constructor.name}`);const[r,a,o]=e[0].split("."),n=oe(a),c=new TextDecoder,{exp:p,sub:l,...i}=JSON.parse(c.decode(n));return{expires_at:p,expires_in:p-Math.round(Date.now()/1e3),token_type:"bearer",access_token:e[0],refresh_token:e[1],provider_token:e[2],provider_refresh_token:e[3],user:{id:l,factors:e[4],...i}}}catch(e){return console.warn("Failed to parse cookie string:",e),null}}function le(t){var e;return JSON.stringify([t.access_token,t.refresh_token,t.provider_token,t.provider_refresh_token,((e=t.user)==null?void 0:e.factors)??null])}function v(){return typeof window<"u"&&typeof window.document<"u"}var O={path:"/",sameSite:"lax",maxAge:60*60*24*365*1e3};function P(t){return new RegExp(".{1,"+t+"}","g")}var U=3180,pe=P(U);function fe(t,e,r){const a=r!==void 0?P(r):pe;if(Math.ceil(e.length/(r??U))===1)return[{name:t,value:e}];const n=[],c=e.match(a);return c==null||c.forEach((p,l)=>{const i=`${t}.${l}`;n.push({name:i,value:p})}),n}function de(t,e=()=>null){let r=[];for(let a=0;;a++){const o=`${t}.${a}`,n=e(o);if(!n)break;r.push(n)}return r.length?r.join(""):null}var he=class{constructor(t){this.cookieOptions={...O,...t,maxAge:O.maxAge}}getItem(t){const e=this.getCookie(t);if(t.endsWith("-code-verifier")&&e)return e;if(e)return JSON.stringify(C(e));const r=de(t,a=>this.getCookie(a));return r!==null?JSON.stringify(C(r)):null}setItem(t,e){if(t.endsWith("-code-verifier")){this.setCookie(t,e);return}let r=JSON.parse(e);const a=le(r);fe(t,a).forEach(n=>{this.setCookie(n.name,n.value)})}removeItem(t){this._deleteSingleCookie(t),this._deleteChunkedCookies(t)}_deleteSingleCookie(t){this.getCookie(t)&&this.deleteCookie(t)}_deleteChunkedCookies(t,e=0){for(let r=e;;r++){const a=`${t}.${r}`;if(this.getCookie(a)===void 0)break;this.deleteCookie(a)}}},ge=class extends he{constructor(t){super(t)}getCookie(t){return v()?(0,b.parse)(document.cookie)[t]:null}setCookie(t,e){if(!v())return null;document.cookie=(0,b.serialize)(t,e,{...this.cookieOptions,httpOnly:!1})}deleteCookie(t){if(!v())return null;document.cookie=(0,b.serialize)(t,"",{...this.cookieOptions,maxAge:0,httpOnly:!1})}};function _e(t,e,r){var a;const o=v();return I(t,e,{...r,auth:{flowType:"pkce",autoRefreshToken:o,detectSessionInUrl:o,persistSession:!0,storage:r.auth.storage,...(a=r.auth)!=null&&a.storageKey?{storageKey:r.auth.storageKey}:{}}})}T.parse;T.serialize;/*! Bundled license information:

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)
*/var me=class extends ge{constructor(t=null,e){super(e),this.serverSession=t}getItem(t){return v()?super.getItem(t):JSON.stringify(this.serverSession)}},w;function ve({supabaseUrl:t,supabaseKey:e,event:r,serverSession:a,options:o,cookieOptions:n}){var c;const p=v();if(p&&w)return w;const l=_e(t,e,{...o,global:{fetch:r.fetch,...o==null?void 0:o.global,headers:{...(c=o==null?void 0:o.global)==null?void 0:c.headers,"X-Client-Info":"@supabase/auth-helpers-sveltekit@0.12.0"}},auth:{storage:new me(a,n)}});return p&&(w=l),l}const ye=async({fetch:t,data:e,depends:r})=>{r("supabase:auth");const a=ve({supabaseUrl:L,supabaseKey:D,event:{fetch:t},serverSession:e.session}),{data:{session:o}}=await a.auth.getSession();return{supabase:a,session:o}},Ae=Object.freeze(Object.defineProperty({__proto__:null,load:ye},Symbol.toStringTag,{value:"Module"}));function be(t){let e,r;const a=t[2].default,o=$(a,t,t[1],null);return{c(){e=B("main"),o&&o.c()},l(n){e=K(n,"MAIN",{});var c=R(e);o&&o.l(c),c.forEach(k)},m(n,c){J(n,e,c),o&&o.m(e,null),r=!0},p(n,[c]){o&&o.p&&(!r||c&2)&&z(o,a,n,n[1],r?F(a,n[1],c,null):H(n[1]),null)},i(n){r||(V(o,n),r=!0)},o(n){Y(o,n),r=!1},d(n){n&&k(e),o&&o.d(n)}}}function we(t,e,r){let{$$slots:a={},$$scope:o}=e,{data:n}=e,{supabase:c,session:p}=n;return Z({themes:{light:["light","winter"],dark:["dark","black","dracula"]},components:{AppBar:{classes:"bg-primary text-white shadow-md"},AppLayout:{classes:{nav:"bg-neutral-800"}},NavItem:{classes:{root:"text-sm text-gray-400 pl-6 py-2 hover:text-white hover:bg-gray-300/10 [&:where(.is-active)]:text-sky-400 [&:where(.is-active)]:bg-gray-500/10"}},ListItem:{classes:{root:"bg-white mb-1 text-sm text-primary-400 pl-6 py-2 hover:text-white hover:bg-gray-300/10 [&:where(.is-active)]:text-sky-400 [&:where(.is-active)]:bg-gray-500/10"}},Card:{},Table:{classes:{container:"bg-white shadow-md"}}}}),X(()=>{const{data:{subscription:l}}=c.auth.onAuthStateChange((i,d)=>{console.log("auth state change",i),i=="SIGNED_OUT"&&(S.set(null),Q("/auth/login")),(i=="INITIAL_SESSION"||i==="TOKEN_REFRESHED")&&S.set(n.supabase.auth),(d==null?void 0:d.expires_at)!==(p==null?void 0:p.expires_at)&&q("supabase:auth")});return()=>l.unsubscribe()}),t.$$set=l=>{"data"in l&&r(0,n=l.data),"$$scope"in l&&r(1,o=l.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&({supabase:c,session:p}=n)},[n,o,a]}class Ne extends G{constructor(e){super(),W(this,e,we,be,M,{data:0})}}export{Ne as component,Ae as universal};
